<Window x:Class="MyMoney.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:model="clr-namespace:MyMoney.Models"
        xmlns:local="clr-namespace:MyMoney" ResizeMode="CanResizeWithGrip"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d" UseLayoutRounding="True" WindowStartupLocation="CenterScreen"
        Title="MainWindow" Height="800" Width="1200">
    
    <Window.Resources>
        <Style TargetType="{x:Type Button}" x:Key="BlueButtonStyle">
            <Setter Property="SnapsToDevicePixels" Value="True"></Setter>
            <Setter Property="Cursor" Value="Hand"></Setter>
            <Setter Property="Foreground" Value="White"></Setter>
            <Setter Property="Padding" Value="8,7"></Setter>
            <Setter Property="FontSize" Value="14"></Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ButtonBase">
                        <Border CornerRadius="2" Padding="{TemplateBinding Padding}" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" Name="border" BorderThickness="0" Background="{StaticResource Blue}">
                            <Border.RenderTransform>
                                <TranslateTransform x:Name="transform" Y="0"></TranslateTransform>
                            </Border.RenderTransform>
                            <Border.Effect>
                                <DropShadowEffect x:Name="shadow" Direction="270" BlurRadius="2" ShadowDepth="3" Opacity="0.3"/>
                            </Border.Effect>
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"></ContentPresenter>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource LightBlue}"></Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation To="2" Duration="0:0:0.1" Storyboard.TargetName="transform" Storyboard.TargetProperty="Y"></DoubleAnimation>
                                            <DoubleAnimation To="0" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="BlurRadius"></DoubleAnimation>
                                            <DoubleAnimation To="0" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="ShadowDepth"></DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation To="0" Duration="0:0:0.1" Storyboard.TargetName="transform" Storyboard.TargetProperty="Y"></DoubleAnimation>
                                            <DoubleAnimation To="2" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="BlurRadius"></DoubleAnimation>
                                            <DoubleAnimation To="3" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="ShadowDepth"></DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type Button}" x:Key="RedButtonStyle">
            <Setter Property="SnapsToDevicePixels" Value="True"></Setter>
            <Setter Property="Cursor" Value="Hand"></Setter>
            <Setter Property="Foreground" Value="White"></Setter>
            <Setter Property="Padding" Value="8,7"></Setter>
            <Setter Property="FontSize" Value="14"></Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ButtonBase">
                        <Border CornerRadius="2" Padding="{TemplateBinding Padding}" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" Name="border" BorderThickness="0" Background="{StaticResource Red}">
                            <Border.RenderTransform>
                                <TranslateTransform x:Name="transform" Y="0"></TranslateTransform>
                            </Border.RenderTransform>
                            <Border.Effect>
                                <DropShadowEffect x:Name="shadow" Direction="270" BlurRadius="2" ShadowDepth="3" Opacity="0.3"/>
                            </Border.Effect>
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"></ContentPresenter>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource DarkRed}"></Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation To="2" Duration="0:0:0.1" Storyboard.TargetName="transform" Storyboard.TargetProperty="Y"></DoubleAnimation>
                                            <DoubleAnimation To="0" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="BlurRadius"></DoubleAnimation>
                                            <DoubleAnimation To="0" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="ShadowDepth"></DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation To="0" Duration="0:0:0.1" Storyboard.TargetName="transform" Storyboard.TargetProperty="Y"></DoubleAnimation>
                                            <DoubleAnimation To="2" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="BlurRadius"></DoubleAnimation>
                                            <DoubleAnimation To="3" Duration="0:0:0.1" Storyboard.TargetName="shadow" Storyboard.TargetProperty="ShadowDepth"></DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate TargetType="TextBox" x:Key="TextBoxStyle">
            <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" CornerRadius="2" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Name="PART_ContentHost"></ScrollViewer>
            </Border>
        </ControlTemplate>
        <local:IntToVNDCurrency x:Key="CurrencyConverter"></local:IntToVNDCurrency>
        <local:DateTimeToString x:Key="DateTimeDisplayConverter"></local:DateTimeToString>
        <local:ExpenseTypeEnumToString x:Key="ExpenseTypeDisplayConverter"></local:ExpenseTypeEnumToString>
    </Window.Resources>
    <DockPanel>
        <StackPanel Width="200" DockPanel.Dock="Left" Background="#FF2E2D2D">
            <Button Margin="38.2" Name="CreatingButton" Style="{StaticResource BlueButtonStyle}" Click="CreatingButton_Click">New List</Button>
            <StackPanel Name="CreatingPanel" Margin="0,20,0,10" Visibility="Collapsed">
                <TextBox Name="NewExpenseListTitle" Margin="8,3" FontSize="14" Padding="8,3" Template="{StaticResource TextBoxStyle}">
                </TextBox>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Button Margin="15,5" Style="{StaticResource BlueButtonStyle}" Click="AddNewExpenseList">Add</Button>
                    <Button Margin="15,5" Style="{StaticResource RedButtonStyle}" Grid.Column="1" Click="CancelAddingNewExpenseList">Cancel</Button>
                </Grid>
            </StackPanel>
            <ListBox Name="ListOfExpenseListViewer" Background="#FF2E2D2D" BorderThickness="0" SelectionChanged="ReloadExpensesViewer" >
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="{x:Type local:ExpenseList}">
                        <TextBlock Text="{Binding Name}" FontSize="14" Margin="8,3" Foreground="#FFC8C8C8"></TextBlock>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <!--<ListBox.ItemsSource>
                    <CompositeCollection>
                        <local:ExpenseList Name="hello"></local:ExpenseList>
                        <local:ExpenseList Name="hello1"></local:ExpenseList>
                        <local:ExpenseList Name="hello2"></local:ExpenseList>
                    </CompositeCollection>
                </ListBox.ItemsSource>-->
            </ListBox>
        </StackPanel>
        <DockPanel>
            <Border DockPanel.Dock="Top" BorderThickness="0,0,0,2" BorderBrush="Gray">
                <StackPanel>
                    <Grid Margin="0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"></RowDefinition>
                            <RowDefinition Height="auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <TextBlock Name="ExpenseList_Name" FontSize="16" Margin="25,0,7,0" VerticalAlignment="Center" Text=""></TextBlock>
                        <TextBlock Name="ExpenseList_TotalExpense" Grid.Column="1" VerticalAlignment="Center" FontSize="16" FontWeight="Bold" Text=""></TextBlock>
                        <ItemsControl Name="TotalExpenseOfAllTypeViewer" Grid.Row="1" Grid.ColumnSpan="2" FontSize="14" Margin="25,0,7,0">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="{x:Type model:TotalExpenseOfAType}">
                                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                        <TextBlock VerticalAlignment="Bottom" Text="{Binding Name}" Margin="0,0,0,0" FontWeight="DemiBold"></TextBlock>
                                        <TextBlock VerticalAlignment="Bottom" Text=":" Margin="0,0,5,0"></TextBlock>
                                        <TextBlock VerticalAlignment="Bottom" FontSize="16" Text="{Binding Value, Converter={StaticResource CurrencyConverter}}"  
                                                   Margin="0,0,15,0" TextAlignment="Right" FontFamily="Consolas" FontWeight="Bold"></TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel></WrapPanel>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <!--<ItemsControl.ItemsSource>
                                <CompositeCollection>
                                    <model:TotalExpenseOfAType Name="Hello" Value="5000"></model:TotalExpenseOfAType>
                                    <model:TotalExpenseOfAType Name="Hello" Value="5000"></model:TotalExpenseOfAType>
                                    <model:TotalExpenseOfAType Name="Hello" Value="5000"></model:TotalExpenseOfAType>

                                </CompositeCollection>
                            </ItemsControl.ItemsSource>-->
                        </ItemsControl>
                        <Button Name="CreatingNewExpenseBtn" Grid.RowSpan="2" Grid.Column="2" VerticalAlignment="Center" Style="{StaticResource BlueButtonStyle}" Margin="15,0" Click="CreatingExpenseButton_Click">Add new expense</Button>
                        <StackPanel Grid.RowSpan="2" Name="CreatingNewExpensePanel2" Orientation="Horizontal" Grid.Column="2" Margin="15,0" VerticalAlignment="Center" Visibility="Collapsed">
                            <Button Margin="5" Style="{StaticResource BlueButtonStyle}" Width="60" Click="AddNewExpense">Save</Button>
                            <Button Margin="5" Style="{StaticResource RedButtonStyle}" Width="60" Click="CancelAddingNewExpense">Cancel</Button>
                        </StackPanel>
                    </Grid>
                    <Grid Name="CreatingNewExpensePanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="160"></ColumnDefinition>
                            <ColumnDefinition Width="160"></ColumnDefinition>
                            <ColumnDefinition Width="150"></ColumnDefinition>
                            <ColumnDefinition Width="20"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"></RowDefinition>
                            <RowDefinition Height="auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Column="0" VerticalAlignment="Center" FontSize="14" Margin="15,0,0,0" FontWeight="Bold">Item:</TextBlock>
                        <TextBox Grid.Column="0" Grid.Row="1" Name="NewExpense_Item" Margin="8,3" FontSize="14" Padding="8,3" VerticalAlignment="Center" BorderThickness="1" Template="{StaticResource TextBoxStyle}">
                        </TextBox>
                        <TextBlock Grid.Column="1" VerticalAlignment="Center" FontSize="14" Margin="5,0,0,0" FontWeight="Bold">Price:</TextBlock>
                        <StackPanel Grid.Column="1" Grid.Row="1" Orientation="Horizontal">
                            <TextBox Name="NewExpense_Price" Margin="8,3" FontSize="14" Padding="3,3" Text="1000000" VerticalAlignment="Center" BorderThickness="1" Width="80" Template="{StaticResource TextBoxStyle}">
                            </TextBox>
                            <TextBlock VerticalAlignment="Center" FontSize="14" Margin="-4,0,0,0">.000 VND</TextBlock>
                        </StackPanel>
                        <TextBlock Grid.Column="2" VerticalAlignment="Center" FontSize="14" Margin="10,0,0,0" FontWeight="Bold">Time:</TextBlock>
                        <TextBox Grid.Column="2" Grid.Row="1" Name="NewExpense_Time" Margin="8,3" FontSize="14" Padding="3,3" VerticalAlignment="Center" BorderThickness="1" Width="140" Template="{StaticResource TextBoxStyle}">
                        </TextBox>
                        <TextBlock Grid.Column="3" VerticalAlignment="Center" FontSize="14" Margin="10,0,0,0" FontWeight="Bold">Type:</TextBlock>
                        <ComboBox Grid.Column="3" Grid.Row="1" Name="NewExpense_Type" Margin="8,3" FontSize="14" Padding="3,3" VerticalAlignment="Center" BorderThickness="1">

                            <sys:String>Book(s)</sys:String>
                            <sys:String>Cooking Material</sys:String>
                            <sys:String>Food Eaten Out</sys:String>
                            <sys:String>Appliance(s)</sys:String>
                            <sys:String>Others</sys:String>
                        </ComboBox>
                    </Grid>
                    <Grid Margin="40,7,0,3" TextBlock.FontSize="14" TextBlock.FontStyle="Italic">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="150"></ColumnDefinition>
                            <ColumnDefinition Width="130"></ColumnDefinition>
                            <ColumnDefinition Width="120"></ColumnDefinition>
                            <ColumnDefinition Width="80"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <TextBlock TextAlignment="Left">Item</TextBlock>
                        <TextBlock TextAlignment="Right" Grid.Column="1" Margin="0,0,25,0">Price</TextBlock>
                        <TextBlock TextAlignment="Center" Grid.Column="2">Time</TextBlock>
                        <TextBlock TextAlignment="Right" Grid.Column="3" Margin="0,0,20,0">Type</TextBlock>
                    </Grid>
                </StackPanel>
            </Border>
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl Name="ExpensesViewer">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="{x:Type local:Expense}">
                            <Grid Margin="40,5,0,5" TextBlock.FontSize="14">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="150"></ColumnDefinition>
                                    <ColumnDefinition Width="130"></ColumnDefinition>
                                    <ColumnDefinition Width="120"></ColumnDefinition>
                                    <ColumnDefinition Width="80"></ColumnDefinition>
                                    
                                </Grid.ColumnDefinitions>
                                <TextBlock VerticalAlignment="Center" Text="{Binding Item}"></TextBlock>
                                <TextBlock VerticalAlignment="Center" Grid.Column="1" FontFamily="Consolas" FontWeight="Bold" Text="{Binding Price, Converter={StaticResource CurrencyConverter}}" 
                                           Margin="0,0,20,0" TextAlignment="Right"></TextBlock>
                                <TextBlock VerticalAlignment="Center" Grid.Column="2" Text="{Binding Time, Converter={StaticResource DateTimeDisplayConverter}}"
                                           Margin="0,0,15,0" TextAlignment="Right"></TextBlock>
                                <TextBlock VerticalAlignment="Center" Grid.Column="3" Text="{Binding ExpenseType, Converter={StaticResource ExpenseTypeDisplayConverter}}"
                                           Margin="0,0,15,0" TextAlignment="Right"></TextBlock>
                                <StackPanel Grid.Column="4" Orientation="Horizontal">
                                    <Button FontFamily="Material Icons" Style="{StaticResource BlueButtonStyle}" Click="EditExpense">edit</Button>
                                    <Button FontFamily="Material Icons" Style="{StaticResource RedButtonStyle}" Margin="8,0,0,0" Click="RemoveExpense">clear</Button>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <!--<ItemsControl.ItemsSource>
                        <CompositeCollection>
                            <local:Expense Time="2010-06-01T00:00:00" Item="Hello" Price="1235" ExpenseType="Book"></local:Expense>
                            <local:Expense Time="2010-06-01T15:00:00" Item="Hello1" Price="12355" ExpenseType="CookingMaterial"></local:Expense>
                            <local:Expense Time="2010-06-01T00:10:00" Item="Hello2" Price="12" ExpenseType="FoodEatenOut"></local:Expense>
                            <local:Expense Time="2010-06-01T15:00:00" Item="Hello3" Price="12355000" ExpenseType="Other"></local:Expense>
                        </CompositeCollection>
                    </ItemsControl.ItemsSource>-->
                </ItemsControl>
            </ScrollViewer>
        </DockPanel>
    </DockPanel>
</Window>
